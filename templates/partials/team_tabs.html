{# templates/partials/team_tabs.html #}

<div class="team-tabs tabs-compact">
  <a class="tab" href="{{ url_for('routes.teams') }}">‚Üê Teams</a>

  <a class="tab {% if request.endpoint == 'routes.team_detail' %}active{% endif %}"
     href="{{ url_for('routes.team_detail', team_slug=slug, team_year=current_year) }}">
    Scores
  </a>

  <a class="tab {% if request.endpoint == 'routes.team_roster' %}active{% endif %}"
     href="{{ url_for('routes.team_roster', team_slug=slug, team_year=current_year) }}">
    Roster
  </a>

  <a class="tab" href="#stats" onclick="return false;">Stats</a>

  <div class="tab select-wrapper">
    <label for="yearPick" class="sr-only">Roster year</label>
    <select id="yearPick" aria-label="Roster year">
      {% for y in years %}
        <option value="{{ y }}" {% if y == current_year %}selected{% endif %}>{{ y }}</option>
      {% endfor %}
    </select>
  </div>
</div>

{% set year_base = url_for(
  request.endpoint if request.endpoint in ['routes.team_roster','routes.team_detail']
  else 'routes.team_detail',
  team_slug=slug, team_year=0
) %}

<script>
(function(){
  const sel = document.getElementById('yearPick');
  if (!sel) return;

  const base = "{{ year_base }}";
  sel.addEventListener('change', function(){
    window.location.href = base.replace('/0', '/' + this.value);
  });
})();
</script>

