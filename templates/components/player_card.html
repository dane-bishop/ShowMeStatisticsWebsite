{# templates/components/player_card.html #}
{% macro player_card(p, current_user=None, is_favorited=False) -%}
<a class="card" href="{{ url_for('routes.player_detail', player_slug=p.player_slug) }}">
  <div class="card-title">{{ p.full_name }}</div>
  <div class="card-meta">{{ p.team_name }} • {{ p.position }}</div>

  {% if current_user and current_user.is_authenticated %}
  <button
      class="favorite-btn{% if is_favorited %} on{% endif %}"
      data-type="player"
      data-id="{{ p.id }}"
      aria-pressed="{{ 'true' if is_favorited else 'false' }}"
      aria-label="{{ 'Unfavorite' if is_favorited else 'Favorite' }} {{ p.full_name }}"
      title="{{ 'Unfavorite' if is_favorited else 'Favorite' }} {{ p.full_name }}">
      {{ '♥' if is_favorited else '♡' }}
  </button>
  {% else %}
  <a class="favorite-btn"
     href="{{ url_for('auth.login_form', next=request.full_path) }}"
     title="Sign in to favorite players">♡</a>
  {% endif %}
</a>
{%- endmacro %}
