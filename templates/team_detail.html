{% extends 'base.html' %}

{% block title %}{{ team.name }} • ShowMeStatistics{% endblock %}

{% block content %}
<section class="team-layout">
  <div class="team-main">

    
    {% set slug = team.slug if team.slug is defined else (team.site_slug if team.site_slug is defined else '') %}
    {% set current_year = team_year if team_year is defined else 2025 %}
    {% set years = range(2025, 1999, -1) %}
    {% include "partials/team_tabs.html" %}


    <!-- Team Schedule -->
    <div class="calendar-card">
      <div class="calendar-header">
        <div class="header-row">
          <h3 class="title">
            {{ team.name }}
            <span class="subtitle">— {{ current_year }} Schedule</span>
          </h3>
    
          {# compute record once #}
          {% set rec = namespace(w=0, l=0, t=0) %}
          {% for e in events %}
            {% if e.result == 'W' %}{% set rec.w = rec.w + 1 %}
            {% elif e.result == 'L' %}{% set rec.l = rec.l + 1 %}
            {% elif e.result in ['T','D'] %}{% set rec.t = rec.t + 1 %}
            {% endif %}
          {% endfor %}
    
          <div class="header-chips">
            <span class="chip chip-record">
              {{ rec.w }}–{{ rec.l }}{% if rec.t %}–{{ rec.t }}{% endif %}
            </span>
            {# optional extra chips #}
            {# <span class="chip">SEC</span> <span class="chip">Home • 24</span> #}
          </div>
        </div>
      </div>
    
      <div class="calendar-grid">
        {% if events %}
          {% for e in events %}
          <div class="calendar-event">
            <div class="event-top">
              <div class="opponent">vs {{ e.opponent_name }}</div>
              {% if e.result %}
                <span class="result-badge {{ 'win' if e.result=='W' else 'loss' }}">
                  {{ e.result }}
                </span>
              {% endif %}
            </div>
    
            <div class="event-title">{{ e.game_date }}</div>
            <div class="event-meta">{{ e.location }}</div>
            <div class="event-meta scores">{{ e.score_for }} - {{ e.score_against }}</div>
            <div class="event-meta time">
              {{ e.game_time }}{% if e.game_number is not none %} • G{{ e.game_number }}{% endif %}
            </div>
          </div>
          {% endfor %}
        {% else %}
          <div class="empty-state">No upcoming events found</div>
        {% endif %}
      </div>
    </div>
    
  </div>


  <!-- Team News-->
  <aside class="team-news">
    <div class="news-header">Latest News</div>
    <ul class="news-list">
      {% for n in news %}
      <li>
        <div class="news-title">{{ n.title }}</div>
        <div class="news-date">{{ n.date }}</div>
      </li>
      {% endfor %}
    </ul>
  </aside>
</section>




{% endblock %}


