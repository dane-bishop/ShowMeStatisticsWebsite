{% extends 'base.html' %}
{% from "components/player_card.html" import player_card %}

{% block title %}Profile • ShowMeStatistics{% endblock %}

{% block content %}
<section class="profile">
  <h2>Account</h2>

  <div class="grid two">
    <!-- Left: Account card -->
    <div class="card long">
      <div class="card-title">Your Account</div>
      <div class="card-meta">Email: {{ user.email }}</div>
      <div class="card-meta">Member since: {{ user.created_at.strftime('%b %d, %Y') if user.created_at else '—' }}</div>

      <hr>

      <form method="post" action="{{ url_for('routes.profile_update_display_name') }}" class="auth-form">
        <label>Display name
          <input type="text" name="display_name" value="{{ user.display_name or '' }}" placeholder="Your name">
        </label>
        <button type="submit" class="btn">Update Name</button>
      </form>

      <hr>

      <form method="post" action="{{ url_for('routes.profile_change_password') }}" class="auth-form">
        <label>Current password
          <input type="password" name="current_password" required>
        </label>
        <label>New password
          <input type="password" name="new_password" required>
        </label>
        <button type="submit" class="btn">Change Password</button>
      </form>

      <hr>

      <form method="post" action="{{ url_for('auth.logout_submit') }}">
        <button type="submit" class="btn btn-secondary">Sign out</button>
      </form>
    </div>



    <!-- Right: Favorites -->
    <!-- Add favorite players here -->
    {% set fps = fav_players | default([]) %}


    <!-- Favorite Players as its own section with similar design -->
    <section class="panel">
      <div class="panel-header">Favorite Players</div>

      {% set fps = fav_players | default([]) %}
      {% if fps %}
        <div class="cards three">
          {% for p in fps %}
            {{ player_card(p) }}
          {% endfor %}
        </div>
      {% else %}
        <div class="card-meta">No favorite players yet. Find a player and tap the ♥ icon.</div>
      {% endif %}
    </section>
  </div>
</section>
{% endblock %}


